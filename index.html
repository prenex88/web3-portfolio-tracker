<!DOCTYPE html>
<html lang="de">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Web3 Portfolio Tracker Pro - Cloud Edition</title>
    
    <link rel="manifest" href="manifest.json">
    <meta name="theme-color" content="#6366f1">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="default">
    
    <script src="https://cdn.jsdelivr.net/npm/chart.js" integrity="sha384-jb8JQMbMoBUzgWatfe6COACi2ljcDdZQ2OxczGA3bGNeWe+6DChMTBJemed7ZnvJ" crossorigin="anonymous" defer></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/html2canvas/1.4.1/html2canvas.min.js" integrity="sha384-ZZ1pncU3bQe8y31yfZdMFdSpttDoPmOZg2wguVK9almUodir1PghgT0eY7Mrty8H" crossorigin="anonymous" defer></script>
    <script src="https://cdn.jsdelivr.net/npm/chartjs-plugin-datalabels@2.0.0" integrity="sha384-M00GJNq2IplZCB3+JOJEl2H0un45ODvqJSSnIc4DvG8gPn8RX5ToITFXcv3AvOx5" crossorigin="anonymous" defer></script>
    <script src="https://cdn.jsdelivr.net/npm/sortablejs@latest/Sortable.min.js" integrity="sha384-HZZ/fukV+9G8gwTNjN7zQDG0Sp7MsZy5DDN6VfY3Be7V9dvQpEpR2jF2HlyFUUjU" crossorigin="anonymous" defer></script>
    <link rel="icon" href="icon.svg" type="image/svg+xml">
    <link rel="stylesheet" href="style.css">
</head>
<body>

    <a href="#appContainer" class="skip-link">Zum Inhalt springen</a>

    <div id="biometricOverlay" class="biometric-overlay" role="dialog" aria-modal="true" aria-labelledby="biometricTitle">
        <div class="biometric-content">
            <div class="biometric-icon" aria-hidden="true">ğŸ”</div>
            <div class="biometric-text" id="biometricTitle">Portfolio Tracker entsperren</div>
            <div class="biometric-subtitle">Verwenden Sie Ihren Fingerabdruck oder Face ID</div>
            <button class="biometric-fallback" data-action="bypass-biometric">
                <span class="sr-only">Notfalloption: </span>Ohne Authentifizierung fortfahren
            </button>
        </div>
    </div>

    <aside id="syncStatusBar" class="sync-status-bar" role="status" aria-live="polite">
        <div class="sync-status">
            <div id="syncIndicator" class="sync-indicator offline"></div>
            <span id="syncStatusText">Offline Modus</span>
            <span id="lastSyncTime" class="sync-last-update" aria-live="polite"></span>
        </div>
        <div class="sync-actions">
            <button id="syncNowBtn" class="btn btn-primary btn-small" data-action="sync-now" aria-live="polite">
                <span id="syncBtnIcon" aria-hidden="true">â˜ï¸</span>
                <span id="syncBtnText">Sync</span>
            </button>
            <button class="btn btn-small" data-action="toggle-sync-bar" aria-label="Sync-Leiste schlieÃŸen">
                <span aria-hidden="true">âœ•</span>
            </button>
        </div>
    </aside>

    <main class="container" id="appContainer" role="main" tabindex="-1">
        <header class="header surface" role="banner">
            <div class="header-content">
                <div class="header-title-group clickable" data-action="switch-tab" data-tab="dashboard" title="Zum Dashboard" role="button" tabindex="0" aria-label="Zum Dashboard wechseln">
                    <h1><span class="app-icon" aria-hidden="true">ğŸš€</span> Web3 Portfolio</h1>
                    <!-- Subtitle nur auf Desktop -->
                    <div class="subtitle desktop-only">Track your crypto & DeFi investments</div>
                </div>
                <!-- Controls nur auf Desktop -->
                <div class="header-controls desktop-only">
                        <button id="globalSearchBtn" class="btn-icon" title="Globale Suche (Ctrl+K)" aria-label="Globale Suche Ã¶ffnen" data-action="open-global-search">
                            <span class="app-icon" aria-hidden="true">ğŸ”</span>
                        </button>
                        <button class="theme-toggle btn-icon" data-action="toggle-theme" title="Theme wechseln (Ctrl+D)" aria-pressed="false" aria-label="Dunkles Design aktivieren">ğŸŒ™</button>

                        <div class="header-menu-dropdown">
                            <button class="btn-icon" data-action="toggle-header-menu" title="Mehr Optionen" aria-haspopup="true" aria-expanded="false" aria-controls="headerDropdown">
                                <svg width="20" height="20" viewBox="0 0 24 24" fill="currentColor">
                                    <circle cx="12" cy="5" r="2"/><circle cx="12" cy="12" r="2"/><circle cx="12" cy="19" r="2"/>
                                </svg>
                            </button>
                            <div id="headerDropdown" class="dropdown-content">
                                <button class="dropdown-item-flex" data-action="open-cloud-settings" data-close-menu="true">
                                    <span class="item-icon app-icon" id="cloudIcon" aria-hidden="true">ğŸ”Œ</span>
                                    <span class="item-text" id="cloudText">Offline</span>
                                    <span id="cloudStatusIndicator" class="status-indicator disconnected"></span>
                                </button>
                                <button class="dropdown-item-flex" data-action="open-date-filter" data-close-menu="true">
                                    <span class="item-icon app-icon" aria-hidden="true">ğŸ—“ï¸</span>
                                    <span class="item-text">Zeitraum filtern</span>
                                    <span id="activeFilterBadge" class="status-indicator-badge"></span>
                                </button>
                                <button id="tab-cashflow" class="dropdown-item-flex" data-action="switch-tab" data-tab="cashflow" data-close-menu="true">
                                    <span class="item-icon app-icon" aria-hidden="true">ğŸ’¸</span>
                                    <span class="item-text">Cashflow verwalten</span>
                                </button>
                                <button id="tab-history" class="dropdown-item-flex" data-action="switch-tab" data-tab="history" data-close-menu="true">
                                    <span class="item-icon app-icon" aria-hidden="true">ğŸ“œ</span>
                                    <span class="item-text">Historie Ã¶ffnen</span>
                                </button>
                                <div class="dropdown-divider"></div>
                                <button data-action="toggle-privacy-mode" data-close-menu="true">
                                    <span class="app-icon" aria-hidden="true">ğŸ‘ï¸</span>
                                    <span>PrivatsphÃ¤re-Modus</span>
                                </button>
                                <button data-action="toggle-compact-mode" data-close-menu="true">
                                    <span class="app-icon" aria-hidden="true">ğŸ“±</span>
                                    <span>Kompakte Ansicht</span>
                                </button>
                                <button data-action="toggle-biometric" data-close-menu="true">
                                    <span class="app-icon" aria-hidden="true">ğŸ”</span>
                                    <span>Bio Auth</span>
                                </button>
                                <button data-action="export-pdf" data-close-menu="true">
                                    <span class="app-icon" aria-hidden="true">ğŸ“„</span>
                                    <span>PDF Export</span>
                                </button>
                                <button data-action="export-json" data-close-menu="true">
                                    <span class="app-icon" aria-hidden="true">ğŸ’¾</span>
                                    <span>JSON Backup</span>
                                </button>
                                <button data-action="export-csv" data-close-menu="true">
                                    <span class="app-icon" aria-hidden="true">ğŸ“Š</span>
                                    <span>CSV Export</span>
                                </button>
                                <div class="dropdown-divider"></div>
                                <button data-action="switch-tab" data-tab="settings" data-close-menu="true">âš™ï¸ Einstellungen</button>
                            </div>
                        </div>
                    </div>
            </div>
        </header>

        <nav class="tab-navigation surface" role="tablist" aria-label="Bereiche">
            <button id="tab-dashboard" class="tab-btn active" role="tab" aria-selected="true" aria-controls="dashboard" tabindex="0" data-action="switch-tab" title="Alt+1" data-tab="dashboard">
                <span class="app-icon" aria-hidden="true">ğŸ“Š</span>
                <span>Dashboard</span>
            </button>
            <button id="tab-entry" class="tab-btn" role="tab" aria-selected="false" aria-controls="entry" tabindex="-1" data-action="switch-tab" title="Alt+2" data-tab="entry">
                <span class="app-icon" aria-hidden="true">ğŸ“</span>
                <span>Neuer Eintrag</span>
            </button>
            <button id="tab-platforms" class="tab-btn" role="tab" aria-selected="false" aria-controls="platforms" tabindex="-1" data-action="switch-tab" title="Alt+3" data-tab="platforms">
                <span class="app-icon" aria-hidden="true">ğŸ’¼</span>
                <span>Plattformen</span>
            </button>
            <button id="tab-notes" class="tab-btn" role="tab" aria-selected="false" aria-controls="notes" tabindex="-1" data-action="switch-tab" title="Alt+5" data-tab="notes">
                <span class="app-icon" aria-hidden="true">ğŸ—’ï¸</span>
                <span>Notizen</span>
            </button>
            <button id="tab-settings" class="tab-btn" role="tab" aria-selected="false" aria-controls="settings" tabindex="-1" data-action="switch-tab" title="Alt+6" data-tab="settings">
                <span class="app-icon" aria-hidden="true">âš™ï¸</span>
                <span>Einstellungen</span>
            </button>
        </nav>

        <!-- Versteckte Inputs fÃ¼r den Filter-Status -->
        <input type="hidden" id="filterStartDate">
        <input type="hidden" id="filterEndDate">

        <div id="dashboard" class="tab-content active" role="tabpanel" aria-labelledby="tab-dashboard" tabindex="0">
            <div id="welcomeCard" class="section welcome-card text-center">
                <div class="welcome-emoji" aria-hidden="true">ğŸ‘‹</div>
                <h2 class="section-title section-title-centered">Willkommen beim Portfolio Tracker!</h2>
                <p class="section-description text-secondary">Es sieht so aus, als hÃ¤ttest du noch keine Daten eingegeben. Starte jetzt mit deinem ersten Eintrag!</p>
                <button class="btn btn-success" data-action="switch-tab" data-tab="entry">
                    <span class="app-icon" aria-hidden="true">ğŸ“</span>
                    <span>Ersten Eintrag erstellen</span>
                </button>
            </div>

            <div id="dashboardContent">
                <div class="stats-grid" id="stats-widget">
                    <div class="stat-card">
                        <div class="stat-card-skeleton"></div>
                        <div class="stat-content">
                            <div class="stat-icon" aria-hidden="true">ğŸ’°</div>
                            <div class="stat-label">Portfolio Gesamtwert</div>
                            <div class="stat-value dollar-value" id="totalValue">$0</div>
                            <div class="stat-change" id="totalChange">
                                <span class="app-icon" aria-hidden="true">ğŸ“Š</span>
                                <span id="totalChangeValue" class="dollar-value"></span>
                                <span id="totalChangePercent"></span>
                            </div>
                        </div>
                    </div>
                    <div class="stat-card">
                        <div class="stat-card-skeleton"></div>
                        <div class="stat-content">
                            <div class="stat-icon">âš¡</div>
                            <div class="stat-label">LETZTE VERÃ„NDERUNG</div>
                            <div class="stat-value" id="dailyChangePercent">-</div>
                            <div class="stat-change" id="dailyChangeAmount">
                                <span>ğŸ’µ</span>
                                <span id="dailyChangeValue" class="dollar-value">-</span>
                            </div>
                        </div>
                    </div>
                    <div class="stat-card">
                        <div class="stat-card-skeleton"></div>
                        <div class="stat-content">
                            <div class="stat-icon">ğŸ’</div>
                            <div class="stat-label">Netto Investiert (Zeitraum)</div>
                            <div class="stat-value dollar-value" id="netInvested">$0</div>
                            <div class="stat-change">
                                <span>ğŸ’³</span>
                                <span id="netInvestedChange" class="dollar-value">Ein: $0 | Aus: $0</span>
                            </div>
                        </div>
                    </div>
                    <div class="stat-card">
                        <div class="stat-card-skeleton"></div>
                        <div class="stat-content">
                            <div class="stat-icon">ğŸ†</div>
                            <div class="stat-label">Reale Performance (Zeitraum)</div>
                            <div class="stat-value dollar-value" id="totalProfit">$0</div>
                            <div class="stat-change">
                                <span>ğŸ“Š</span>
                                <span id="profitPercent">0%</span>
                            </div>
                        </div>
                    </div>
                </div>

        <div class="section" id="portfolio-chart-widget">
            <div class="section-header">
                <div class="section-title"><span>ğŸ“ˆ</span><span>Portfolio Entwicklung</span></div>
                <div class="chart-controls">
                    <button class="chart-timeframe-btn" data-action="set-date-filter" data-range="30d">1M</button>
                            <button class="chart-timeframe-btn" data-action="set-date-filter" data-range="90d">3M</button>
                            <button class="chart-timeframe-btn" data-action="set-date-filter" data-range="ytd">YTD</button>
                            <button class="chart-timeframe-btn" data-action="set-date-filter" data-range="1y">1J</button>
                            <button class="chart-timeframe-btn active" data-action="set-date-filter" data-range="all">MAX</button>
                        </div>
                <button class="btn btn-primary btn-small" data-action="export-chart" data-target="portfolioChartContainer" title="Ctrl+E">ğŸ“· Export</button>
            </div>
            <div class="chart-container" id="portfolioChartContainer">
                 <div class="chart-skeleton"></div>
                <canvas id="portfolioChart"></canvas>
            </div>
            <div id="chart-performance-legend" class="chart-performance-legend"></div>
                </div>
                
                <div class="two-column-layout" id="details-widgets">
                    <div class="section">
                        <div class="section-header">
                            <div class="section-title"><span>â„¹ï¸</span><span>Portfolio-Analyse</span></div>
                        </div>
                        <div id="keyMetrics" class="metrics-grid">
                            <div id="keyMetrics" class="metrics-grid">
                                <div class="metric-item">
                                    <span class="metric-label">Start</span>
                                    <span class="metric-value" id="metricStartDate">-</span>
                                </div>
                                <div class="metric-item">
                                    <span class="metric-label">Laufzeit</span>
                                    <span class="metric-value" id="metricDuration">-</span>
                                </div>
                                <div class="metric-item">
                                    <span class="metric-label">Startkapital</span>
                                    <span class="metric-value dollar-value" id="metricStartCapital">-</span>
                                </div>
                                <div class="metric-item">
                                    <span class="metric-label">Rendite (Gesamt)</span>
                                    <span class="metric-value" id="metricTotalReturnPercent">-</span>
                                </div>
                                <div class="metric-item">
                                    <span class="metric-label">Rendite Summe</span>
                                    <span class="metric-value dollar-value" id="metricTotalReturnSum">-</span>
                                </div>
                                <div class="metric-item">
                                    <span class="metric-label">Rendite Ã˜ (Monat)</span>
                                    <span class="metric-value" id="metricAvgMonthlyReturn">-</span>
                                </div>
                                <div class="metric-item">
                                    <span class="metric-label">Rendite Prognose (Jahr)</span>
                                    <span class="metric-value" id="metricAnnualForecast">-</span>
                                </div>
                                <div class="metric-item">
                                    <span class="metric-label">Max. Drawdown</span>
                                    <span class="metric-value" id="metricMaxDrawdown">-</span>
                                </div>
                                <div class="metric-item">
                                    <span class="metric-label">Portfolio Prognose (Jahr)</span>
                                    <span class="metric-value dollar-value" id="metricPortfolioForecast">-</span>
                                </div>
                            </div>
                        </div>
                    </div>
                     <div class="section">
                        <div class="section-header">
                            <div class="section-title"><span>ğŸ°</span><span>Portfolio-Verteilung</span></div>
                             <button class="btn btn-primary btn-small" data-action="export-chart" data-target="allocationChartContainer" title="Ctrl+E">ğŸ“· Export</button>
                        </div>
                        <div class="chart-container" id="allocationChartContainer">
                            <div class="chart-skeleton"></div>
                            <canvas id="allocationChart"></canvas>
                        </div>
                    </div>
                </div>
                <!-- NEUES, VERBESSERTES PROGNOSE-WIDGET -->
                <div id="forecastWidget" class="section forecast-widget">
                    <div class="forecast-header">
                        <div>
                            <div class="forecast-title">ğŸ”® Portfolio Prognose</div>
                            <p class="forecast-subtitle">
                                Basierend auf historischer Performance und verschiedenen Szenarien.<br>
                                Vergangene Performance ist keine Garantie fÃ¼r zukÃ¼nftige Ergebnisse.
                            </p>
                        </div>
                        <div class="forecast-controls">
                            <div class="time-selector">
                                <button class="time-btn" data-action="set-forecast-period" data-years="3">3 Jahre</button>
                                <button class="time-btn active" data-action="set-forecast-period" data-years="5">5 Jahre</button>
                                <button class="time-btn" data-action="set-forecast-period" data-years="10">10 Jahre</button>
                            </div>
                            <button class="scenario-toggle" data-action="toggle-scenarios">
                                ğŸ“Š Szenarien
                            </button>
                        </div>
                    </div>

                    <div class="forecast-metrics">
                        <div class="metric-card">
                            <span class="metric-icon">ğŸ¯</span>
                            <div class="metric-value" id="forecastMetricRealisticValue">$0</div>
                            <div class="metric-label" id="forecastMetricRealisticLabel">Erwarteter Wert (5J)</div>
                        </div>
                        <div class="metric-card success">
                            <span class="metric-icon">ğŸ“ˆ</span>
                            <div class="metric-value" id="forecastMetricAnnualReturn">-</div>
                            <div class="metric-label">JÃ¤hrliche Rendite</div>
                        </div>
                        <div class="metric-card warning">
                            <span class="metric-icon">ğŸ’°</span>
                            <div class="metric-value" id="forecastMetricTotalProfit">$0</div>
                            <div class="metric-label">Prognostizierter Gewinn</div>
                        </div>
                        <div class="metric-card danger">
                            <span class="metric-icon">ğŸ“‰</span>
                            <div class="metric-value" id="forecastMetricConservativeValue">$0</div>
                            <div class="metric-label" id="forecastMetricConservativeLabel">"Pessimistisch" (5J)</div>
                        </div>
                    </div>

                    <div class="forecast-chart-container">
                        <canvas id="forecastChart"></canvas>
                    </div>

                    <div class="scenario-cards">
                        <div class="scenario-card conservative">
                            <div class="scenario-header">
                                <div class="scenario-icon">ğŸ›¡ï¸</div>
                                <div>
                                    <div class="scenario-title">Konservativ</div>
                                    <div class="scenario-subtitle" id="conservativeReturnLabel">Vorsichtige SchÃ¤tzung</div>
                                </div>
                            </div>
                            <div class="scenario-value" id="conservativeValue">$0</div>
                            <div class="probability-bar">
                                <div class="probability-fill"></div>
                            </div>
                            <div class="scenario-details">
                                BerÃ¼cksichtigt niedrigere Marktrenditen und hÃ¶here VolatilitÃ¤t. 
                                Wahrscheinlichkeit: 25%
                            </div>
                        </div>

                        <div class="scenario-card realistic">
                            <div class="scenario-header">
                                <div class="scenario-icon">ğŸ¯</div>
                                <div>
                                    <div class="scenario-title">Realistisch</div>
                                    <div class="scenario-subtitle" id="realisticReturnLabel">Bisherige Performance</div>
                                </div>
                            </div>
                            <div class="scenario-value" id="realisticValue">$0</div>
                            <div class="probability-bar">
                                <div class="probability-fill"></div>
                            </div>
                            <div class="scenario-details">
                                Basiert auf historischer Portfolio-Performance und Markttrends. 
                                Wahrscheinlichkeit: 50%
                            </div>
                        </div>

                        <div class="scenario-card optimistic">
                            <div class="scenario-header">
                                <div class="scenario-icon">ğŸš€</div>
                                <div>
                                    <div class="scenario-title">Optimistisch</div>
                                    <div class="scenario-subtitle" id="optimisticReturnLabel">Starkes Wachstum</div>
                                </div>
                            </div>
                            <div class="scenario-value" id="optimisticValue">$0</div>
                            <div class="probability-bar">
                                <div class="probability-fill"></div>
                            </div>
                            <div class="scenario-details">
                                Optimiert fÃ¼r WachstumsmÃ¤rkte und starke Portfolio-Performance. 
                                Wahrscheinlichkeit: 25%
                            </div>
                        </div>
                    </div>

                    <div class="disclaimer">
                        <span class="disclaimer-icon">âš ï¸</span>
                        <strong>Wichtiger Hinweis:</strong> Diese Prognosen sind SchÃ¤tzungen basierend auf historischen Daten 
                        und mathematischen Modellen. TatsÃ¤chliche Ergebnisse kÃ¶nnen erheblich abweichen. Investitionen sind 
                        mit Risiken verbunden und vergangene Performance ist keine Garantie fÃ¼r zukÃ¼nftige Ergebnisse.
                    </div>
                </div>
            </div>
        </div>

        <div id="entry" class="tab-content" role="tabpanel" aria-labelledby="tab-entry" tabindex="0" hidden>
             <div class="section">
                <div class="section-header">
                    <div class="section-title"><span>ğŸ“</span><span>Neuer Eintrag</span></div>
                    <div>
                        <button class="btn btn-success pulse" data-action="save-all-entries" title="Ctrl+S">
                            <span>ğŸ’¾</span><span>Alle Speichern</span>
                        </button>
                    </div>
                </div>

                <div class="entry-date-bar">
                    <div class="date-bar-group">
                        <span class="date-bar-label">ğŸ“… Datum</span>
                        <input type="date" id="entryDate" class="date-input compact">
                    </div>
                    <div class="date-bar-actions">
                        <button class="btn btn-secondary btn-small" data-action="set-to-today">Heute</button>
                        <button class="btn btn-secondary btn-small" data-action="set-to-yesterday">Gestern</button>
                        <button class="btn btn-secondary btn-small" data-action="load-last-entries">ğŸ” Letzte EintrÃ¤ge laden</button>
                    </div>
                </div>

                <div class="entry-layout">
                    <aside class="entry-context">
                        <details class="entry-fold" id="entrySummaryFold" hidden>
                            <summary class="entry-fold-summary">ğŸ“Š Zusammenfassung</summary>
                            <div class="entry-fold-body">
                                <div id="entrySummary" class="summary-list">
                                    <div class="summary-item">
                                        <span class="summary-label">Aktive Plattformen</span>
                                        <span class="summary-value" id="summaryActiveCount">0</span>
                                    </div>
                                    <div class="summary-item">
                                        <span class="summary-label">Neuer Gesamtwert</span>
                                        <span class="summary-value" id="summaryTotalValue">$0</span>
                                    </div>
                                    <div class="summary-item">
                                        <span class="summary-label">VerÃ¤nderung</span>
                                        <span class="summary-value" id="summaryDeltaValue">$0</span>
                                    </div>
                                    <div class="summary-item">
                                        <span class="summary-label">Ungespeichert</span>
                                        <span class="summary-value" id="summaryPendingCount">0</span>
                                    </div>
                                </div>
                            </div>
                        </details>

                        <details class="entry-fold" id="dayStrategyFold">
                            <summary class="entry-fold-summary">ğŸ¯ Tages-Strategie</summary>
                            <div class="entry-fold-body" id="dayStrategyContainer">
                                <textarea id="dailyStrategy" class="strategy-area" rows="4" placeholder="z.B. Absicherung, Rebalancing..." onkeydown="if(event.key === 'Enter' && event.metaKey) { event.preventDefault(); saveStrategyOnly(); }"></textarea>
                                <div class="entry-fold-actions">
                                    <button class="btn btn-primary btn-small" data-action="save-strategy-only">ğŸ’¾ Strategie speichern</button>
                                </div>
                            </div>
                        </details>

                        <details class="entry-fold" id="quickActionsFold">
                            <summary class="entry-fold-summary">âš¡ Schnellaktionen</summary>
                            <div class="entry-fold-body">
                                <div class="entry-toolbar-status" id="entryLoadStatus">Noch keine Auswahl aktiv.</div>
                                <div class="entry-fold-actions stacked">
                                    <button class="btn btn-secondary" data-action="select-favorite-platforms">â­ Favoriten Ã¼bernehmen</button>
                                    <button class="btn btn-secondary" data-action="select-platforms-with-balance">ğŸ’° Mit Bestand</button>
                                    <button class="btn btn-secondary" data-action="open-cashflow-from-entry">ğŸ’¸ Cashflow verbuchen</button>
                                    <button class="btn btn-secondary" data-action="clear-entry-inputs">â™»ï¸ ZurÃ¼cksetzen</button>
                                </div>
                            </div>
                        </details>

                        <details class="entry-fold" id="favoritesFold">
                            <summary class="entry-fold-summary">â­ Favoriten</summary>
                            <div class="entry-fold-body">
                                <p class="entry-fold-subtext">Ziehe Plattformen hierher, um sie schnell zur tÃ¤glichen Erfassung hinzuzufÃ¼gen.<br> Tipp: Stern erneut anklicken oder âŒ nutzen, um Favoriten zu entfernen.</p>
                                <div id="favoritesGrid" class="favorites-zone"></div>
                            </div>
                        </details>

                        <div class="entry-hint-card">
                            ğŸ’¡ Beim Speichern kannst du nicht ausgewÃ¤hlte Plattformen automatisch auf 0 setzen.
                        </div>
                    </aside>

                    <section class="entry-main">
                        <details class="platform-selector">
                            <summary class="platform-selector-summary">
                                <div class="summary-main">ğŸ¦„ Plattformen auswÃ¤hlen</div>
                                <div class="summary-hint">Klicken zum Ein- oder Ausblenden</div>
                            </summary>
                            <div class="platform-selector-body">
                                <div class="main-toolbar">
                                    <div class="main-search">
                                        <div class="platform-search-container">
                                            <input type="text" id="platformSearch" class="platform-search" placeholder="Plattform suchen... (Ctrl+F)" oninput="filterPlatforms()" onkeydown="handleSearchKeydown(event)">
                                            <span class="search-icon">ğŸ”</span>
                                            <div id="autocompleteDropdown" class="autocomplete-dropdown"></div>
                                        </div>
                                    </div>
                                    <div class="main-filters">
                                        <button class="category-btn active" data-action="filter-category" data-category="all">Alle</button>
                                        <button class="category-btn" data-action="filter-category" data-category="Exchange">Exchanges</button>
                                        <button class="category-btn" data-action="filter-category" data-category="DeFi">DeFi</button>
                                        <button class="category-btn" data-action="filter-category" data-category="Lending">Lending</button>
                                        <button class="category-btn" data-action="filter-category" data-category="Wallet">Wallets</button>
                                    </div>
                                </div>
                                <div class="platform-grid" id="platformGrid"></div>
                            </div>
                        </details>

                        <div id="autoZeroHint" class="auto-zero-hint">
                            ğŸ’¡ <b>Tipp:</b> Wenn du jetzt speicherst, kannst du nicht ausgewÃ¤hlte Plattformen, die vorher Kapital hatten, automatisch auf 0 setzen.
                        </div>

                        <div id="platformInputs" class="input-grid entry-input-grid"></div>
                    </section>
                </div>

            </div>
        </div>

        <div id="cashflow" class="tab-content" role="tabpanel" aria-labelledby="tab-cashflow" tabindex="0" hidden>
            <div class="section">
                <div class="section-header">
                    <div class="section-title"><span>ğŸ’¸</span><span>Cashflow Management</span></div>
                </div>
                
                <div class="cashflow-stats">
                    <div class="cashflow-stat">
                        <div class="cashflow-stat-label">â• Total Eingezahlt</div>
                        <div class="cashflow-stat-value positive dollar-value" id="totalDeposits">$0</div>
                    </div>
                    <div class="cashflow-stat">
                        <div class="cashflow-stat-label">â– Total Ausgezahlt</div>
                        <div class="cashflow-stat-value negative dollar-value" id="totalWithdrawals">$0</div>
                    </div>
                    <div class="cashflow-stat">
                        <div class="cashflow-stat-label">ğŸ’ Netto Investiert</div>
                        <div class="cashflow-stat-value dollar-value" id="netCashflow">$0</div>
                    </div>
                    <div class="cashflow-stat">
                        <div class="cashflow-stat-label">ğŸ“Š ROI</div>
                        <div class="cashflow-stat-value" id="roiPercent">0%</div>
                    </div>
                </div>

                <div class="cashflow-form">
                    <div class="cashflow-field">
                        <label class="cashflow-label">Typ:</label>
                        <div class="cashflow-type">
                            <label class="radio-option">
                                <input type="radio" name="cashflowType" value="deposit" checked>
                                <span>â• Einzahlung</span>
                            </label>
                            <label class="radio-option">
                                <input type="radio" name="cashflowType" value="withdraw">
                                <span>â– Auszahlung</span>
                            </label>
                        </div>
                    </div>
                    <div class="cashflow-field">
                        <label class="cashflow-label">Betrag (USD):</label>
                        <input type="text" id="cashflowAmount" class="input-field" placeholder="1000" inputmode="decimal">
                    </div>
                    <div class="cashflow-field">
                        <label class="cashflow-label">Datum:</label>
                        <input type="date" id="cashflowDate" class="date-input">
                    </div>
                    <div class="cashflow-field" id="cashflowTargetDiv">
                        <label class="cashflow-label">Ziel-Plattform:</label>
                        <select id="cashflowTarget" class="input-field"></select>
                    </div>
                    <div class="cashflow-field">
                        <label class="cashflow-label">Notiz:</label>
                        <input type="text" id="cashflowNote" class="input-field" placeholder="Optional...">
                    </div>
                    <div class="cashflow-actions">
                        <button class="btn btn-success cashflow-save-btn" data-action="save-cashflow" title="Ctrl+S">
                            <span>ğŸ’¾</span><span>Speichern</span>
                        </button>
                    </div>
                </div>
            </div>

            <div class="section">
                <div class="section-header">
                    <div class="section-title"><span>ğŸ“œ</span><span>Cashflow Historie</span></div>
                    <div class="view-switcher">
                        <button class="view-btn active" data-action="set-cashflow-view" data-view="list">Liste</button>
                        <button class="view-btn" data-action="set-cashflow-view" data-view="month">Monat</button>
                        <button class="view-btn" data-action="set-cashflow-view" data-view="quarter">Quartal</button>
                    </div>
                </div>
                <div id="cashflowDisplayContainer" class="cashflow-display-container">
                    <table class="data-table">
                        <thead>
                            <tr>
                                <th class="sortable" data-sort="date">Datum <span class="sort-arrow"></span></th>
                                <th class="sortable" data-sort="type">Typ <span class="sort-arrow"></span></th>
                                <th class="sortable" data-sort="amount">Betrag <span class="sort-arrow"></span></th>
                                <th class="sortable" data-sort="platform">Plattform <span class="sort-arrow"></span></th>
                                <th class="sortable" data-sort="note">Notiz <span class="sort-arrow"></span></th>
                                <th></th>
                            </tr>
                        </thead>
                        <tbody id="cashflowTableBody"></tbody>
                    </table>
                </div>
            </div>
        </div>

        <div id="platforms" class="tab-content" role="tabpanel" aria-labelledby="tab-platforms" tabindex="0" hidden>
             <div class="section">
                <div class="section-header">
                    <div class="section-title"><span>ğŸ’¼</span><span>Platform Details</span></div>
                </div>
                <div class="data-table-wrapper">
                    <table class="data-table">
                        <thead>
                            <tr>
                                <th class="sortable" data-sort="platform">Plattform <span class="sort-arrow"></span></th>
                                <th class="sortable" data-sort="entries">EintrÃ¤ge <span class="sort-arrow"></span></th>
                                <th class="sortable" data-sort="first">Erster Eintrag <span class="sort-arrow"></span></th>
                                <th class="sortable" data-sort="last">Letzter Eintrag <span class="sort-arrow"></span></th>
                                <th class="sortable" data-sort="avg">Avg Balance <span class="sort-arrow"></span></th>
                                <th class="sortable" data-sort="total">Total Return <span class="sort-arrow"></span></th>
                            </tr>
                        </thead>
                        <tbody id="platformDetailsBody"></tbody>
                    </table>
                </div>
            </div>
        </div>

        <div id="history" class="tab-content" role="tabpanel" aria-labelledby="tab-history" tabindex="0" hidden>
            <div class="section">
                <div class="section-header">
                    <div class="section-title"><span>ğŸ“œ</span><span>Eintrags-Historie</span></div>
                    <div class="view-switcher">
                        <button class="view-btn active" data-action="set-history-view" data-view="list">Liste</button>
                        <button class="view-btn" data-action="set-history-view" data-view="grouped">Nach Plattform</button>
                        <button class="view-btn" data-action="set-history-view" data-view="bydate">Nach Datum</button>
                    </div>
                    <input type="text" id="historySearch" class="input-field history-search-input" placeholder="In Liste suchen...">
                </div>
                <div id="historyListView">
                    <div class="data-table-wrapper">
                        <table class="data-table">
                            <thead>
                                <tr>
                                    <th><input type="checkbox" id="selectAllHistory" title="Alle auswÃ¤hlen"></th>
                                    <th class="sortable" data-sort="date">Datum <span class="sort-arrow"></span></th>
                                    <th class="sortable" data-sort="protocol">Plattform <span class="sort-arrow"></span></th>
                                    <th class="sortable" data-sort="balance">Balance <span class="sort-arrow"></span></th>
                                    <th class="sortable" data-sort="strategy">Strategie <span class="sort-arrow"></span></th>
                                    <th>Notiz</th>
                                    <th>Aktionen</th>
                                </tr>
                            </thead>
                            <tbody id="historyTableBody"></tbody>
                        </table>
                    </div>
                </div>
                <div id="historyMobileCards" class="mobile-cards">
                    <!-- Mobile card layout wird hier von JavaScript eingefÃ¼gt -->
                </div>
                <div id="historyBulkActions" class="bulk-actions-bar">
                    <span id="bulkSelectedCount">0 EintrÃ¤ge ausgewÃ¤hlt</span>
                    <div class="bulk-actions-buttons">
                        <button class="btn btn-primary btn-small" data-action="bulk-change-date">
                            <span>ğŸ—“ï¸</span> Datum Ã¤ndern
                        </button>
                        <button class="btn btn-primary btn-small" data-action="bulk-change-amount">
                            <span>ğŸ’°</span> Betrag Ã¤ndern
                        </button>
                        <button class="btn btn-danger btn-small" data-action="delete-selected-entries">
                            <span>ğŸ—‘ï¸</span> Auswahl lÃ¶schen
                        </button>
                    </div>
                </div>
                <div id="historyGroupedView" class="history-grouped-view">
                    <!-- Gruppierte Ansicht wird hier von JavaScript eingefÃ¼gt -->
                </div>
                <div id="historyByDateView" class="history-by-date-view">
                    <!-- Neue, nach Datum gruppierte Ansicht -->
                </div>
            </div>
        </div>

        <div id="notes" class="tab-content" role="tabpanel" aria-labelledby="tab-notes" tabindex="0" hidden>
            <div class="section">
                <div class="section-header">
                    <div class="section-title"><span>ğŸ—’ï¸</span><span>Notizbuch</span></div>
                    <div class="notes-toolbar">
                        <input type="text" id="notesSearchInput" class="input-field" placeholder="Notizen durchsuchen...">
                        <button class="btn btn-primary btn-small" type="button" id="notesNewBtn">â• Neue Notiz</button>
                    </div>
                    <div class="notes-filter-bar">
                        <button type="button" class="notes-filter-chip" id="notePinnedFilterBtn" aria-pressed="false">ğŸ“Œ Angepinnt</button>
                        <div class="notes-tag-filter" id="noteTagFilters"></div>
                        <div class="notes-sort-group">
                            <label for="noteSortSelect">Sortieren:</label>
                            <select id="noteSortSelect" class="notes-sort-select">
                                <option value="updated-desc">Zuletzt aktualisiert</option>
                                <option value="updated-asc">Ã„lteste zuerst</option>
                                <option value="created-desc">Erstellt (neueste)</option>
                                <option value="created-asc">Erstellt (Ã¤lteste)</option>
                                <option value="title-asc">Titel A â†’ Z</option>
                                <option value="title-desc">Titel Z â†’ A</option>
                            </select>
                        </div>
                        <button type="button" class="notes-filter-reset" id="noteFilterResetBtn" disabled>Filter zurÃ¼cksetzen</button>
                    </div>
                </div>
                <div class="note-editor" id="noteEditor">
                    <div class="note-editor-content">
                        <div class="note-editor-form">
                            <input type="text" id="noteTitleInput" class="input-field" placeholder="Titel der Notiz">
                        <div class="note-rich-editor">
                            <div class="note-toolbar" id="noteToolbar">
                                <button type="button" class="note-tool" data-command="bold" title="Fett">B</button>
                                <button type="button" class="note-tool" data-command="italic" title="Kursiv">I</button>
                                <button type="button" class="note-tool" data-command="underline" title="Unterstreichen">U</button>
                                <span class="note-toolbar-separator"></span>
                                <button type="button" class="note-tool" data-command="insertUnorderedList" title="Liste">â€¢ List</button>
                                <button type="button" class="note-tool" data-command="insertOrderedList" title="Nummerierte Liste">1. List</button>
                                <span class="note-toolbar-separator"></span>
                                <label class="note-color-picker" title="Textfarbe">
                                    ğŸ¨
                                    <input type="color" id="noteColorPicker" value="#3b82f6">
                                </label>
                                <button type="button" class="note-tool" data-command="removeFormat" title="Formatierung entfernen">â¨¯</button>
                            </div>
                            <div id="noteContentEditor" class="note-content-editor" contenteditable="true" role="textbox" aria-multiline="true" data-placeholder="Was mÃ¶chtest du festhalten?"></div>
                            <textarea id="noteContentInput" class="note-content-hidden" aria-hidden="true"></textarea>
                        </div>
                        <div class="note-tags-group">
                            <input type="text" id="noteTagsInput" class="input-field" placeholder="Tags mit Komma trennen (z.B. DeFi, Ideen)">
                            <div id="noteTagChips" class="note-tag-chips"></div>
                        </div>
                            <div class="note-editor-footer">
                                <label class="file-upload" for="noteAttachmentInput">
                                    <input type="file" id="noteAttachmentInput" accept="image/*" multiple>
                                    <span>ğŸ“ Screenshots anhÃ¤ngen</span>
                                </label>
                                <div class="note-editor-actions">
                                    <label class="note-pin-toggle">
                                        <input type="checkbox" id="notePinnedToggle">
                                        <span>ğŸ“Œ Wichtig markieren</span>
                                    </label>
                                    <button class="btn btn-secondary btn-small" type="button" id="noteCancelBtn">ZurÃ¼cksetzen</button>
                                    <button class="btn btn-success btn-small" type="button" id="noteSaveBtn">Speichern</button>
                                </div>
                                <div id="noteDraftStatus" class="note-draft-status"></div>
                            </div>
                        </div>
                    </div>
                    <div id="noteAttachmentPreview" class="note-attachments"></div>
                </div>
            </div>

            <div class="section">
                <div class="section-header">
                    <div class="section-title"><span>ğŸ“š</span><span>Meine Notizen</span></div>
                    <div id="notesStats" class="notes-meta"></div>
                </div>
                <div id="notesEmptyState" class="empty-state notes-empty-state">
                    <div class="empty-state-icon">ğŸ—’ï¸</div>
                    <h3>Keine Notizen gespeichert</h3>
                    <p>Halte spontane Ideen, wichtige Todos oder Links fest. Ãœber den Button oben kannst du Screenshots hinzufÃ¼gen.</p>
                </div>
                <div class="notes-sections">
                    <div class="notes-group" id="notesPinnedGroup">
                        <div class="notes-group-title">ğŸ“Œ Angepinnt</div>
                        <div id="notesPinned" class="notes-list pinned"></div>
                    </div>
                    <div class="notes-group" id="notesRegularGroup">
                        <div class="notes-group-title">Alle Notizen</div>
                        <div id="notesRegular" class="notes-list"></div>
                    </div>
                </div>
            </div>
        </div>

        <div id="settings" class="tab-content" role="tabpanel" aria-labelledby="tab-settings" tabindex="0" hidden>
            <div class="section">
                <details open>
                    <summary class="section-header-summary">
                        <div class="section-title"><span>â˜ï¸</span><span>Cloud Sync Einstellungen</span></div>
                        <span class="summary-arrow">â–¼</span>
                    </summary>
                    <div class="details-content details-content-padded">
                        <div id="connectionStatus" class="connection-status disconnected">
                            <span>âš ï¸</span>
                            <span>Nicht verbunden - Konfiguriere GitHub fÃ¼r Cloud Sync</span>
                        </div>

                        <div class="info-box">
                            <h3>ğŸ“ Wie funktioniert der Cloud Sync?</h3>
                            <p>
                                Deine Daten werden in einem privaten GitHub Gist gespeichert. 
                                Nur du hast Zugriff darauf. Du benÃ¶tigst einen GitHub Account und ein Personal Access Token.
                            </p>
                        </div>

                        <div class="settings-grid">
                            <div class="setting-item">
                                <div class="setting-label">GitHub Token</div>
                                <div class="setting-value" id="tokenDisplay">Nicht konfiguriert</div>
                                <div class="setting-actions">
                                    <button class="btn btn-primary btn-small" data-action="setup-github-token">Token setzen</button>
                                    <button class="btn btn-danger btn-small" data-action="clear-github-token">LÃ¶schen</button>
                                </div>
                            </div>
                            
                            <div class="setting-item setting-item-hidden">
                                <div class="setting-label">Gist ID</div>
                                <div class="setting-value" id="gistDisplay">Nicht konfiguriert</div>
                                <div class="setting-actions">
                                    <button class="btn btn-primary btn-small" data-action="setup-gist-id">Gist ID setzen</button>
                                    <button class="btn btn-success btn-small" data-action="create-new-gist">Neu erstellen</button>
                                    <button class="btn btn-danger btn-small" data-action="clear-gist-id">LÃ¶schen</button>
                                </div>
                            </div>

                            <div class="setting-item">
                                <div class="setting-label">Auto-Sync</div>
                                <div class="setting-value">
                                    <label class="toggle-label">
                                        <input type="checkbox" id="autoSyncToggle" onchange="toggleAutoSync()">
                                        <span>Bei jeder Ã„nderung automatisch synchronisieren</span>
                                    </label>
                                </div>
                            </div>

                            <div class="setting-item">
                                <div class="setting-label">Letzter Sync</div>
                                <div class="setting-value" id="lastSyncDisplay">Noch nie synchronisiert</div>
                                <div class="setting-actions">
                                    <button class="btn btn-success btn-small" data-action="sync-now">Jetzt synchronisieren</button>
                                </div>
                            </div>
                        </div>

                        <div class="settings-action-bar">
                            <button class="btn btn-primary" data-action="test-connection">
                                <span class="app-icon" aria-hidden="true">ğŸ”Œ</span><span>Verbindung testen</span>
                            </button>
                        </div>
                    </div>
                </details>
            </div>
            
            <div class="section">
                <details>
                    <summary class="section-header-summary">
                        <div class="section-title"><span>ğŸ’¾</span><span>Backup & Wiederherstellung</span></div>
                        <span class="summary-arrow">â–¼</span>
                    </summary>
                    <div class="details-content">
                        <div class="settings-grid settings-grid-spaced">
                            <div class="setting-item">
                                <div class="setting-label">Lokales Backup</div>
                                <div class="setting-value">Stellt den Zustand vom letzten Speichern wieder her.</div>
                                <div class="setting-actions">
                                    <button class="btn btn-warning btn-small" data-action="restore-local-backup">Aus lokalem Backup wiederherstellen</button>
                                </div>
                            </div>
                        </div>
                        <div class="info-box info-box-spaced">
                            <h3>ğŸ’¡ Deine Backup-Strategie</h3>
                            <p>Deine Daten sind mehrfach gesichert:</p>
                            <ul>
                                <li><b>Lokal (Automatisch):</b> Bei jeder Speicherung wird ein Backup in der robusten IndexedDB deines Browsers angelegt. Dies dient als schnelle, lokale Absicherung.</li>
                                <li><b>Cloud (Empfohlen):</b> Die Synchronisierung mit GitHub (siehe oben) ist die sicherste Methode, um deine Daten gerÃ¤teÃ¼bergreifend zu sichern und wiederherzustellen.</li>
                                <li><b>Manuell (Export):</b> Du kannst deine Daten jederzeit als JSON- oder CSV-Datei exportieren und an einem sicheren Ort speichern.</li>
                            </ul>
                        </div>
                    </div>
                </details>
            </div>
            
            <!-- Ansicht & Bedienung Section -->
            <div class="section">
                <details>
                    <summary class="section-header-summary">
                        <div class="section-title"><span>ğŸ¨</span><span>Ansicht & Bedienung</span></div>
                        <span class="summary-arrow">â–¼</span>
                    </summary>
                    <div class="details-content">
                        <div class="settings-grid settings-grid-spaced">
                            <div class="setting-item">
                                <div class="setting-label">Kompakte Ansicht</div>
                                <div class="setting-value">
                                    <label class="toggle-label">
                                        <input type="checkbox" id="compactModeToggle" onchange="toggleCompactMode()">
                                        <span>Optimiert fÃ¼r kleine Bildschirme</span>
                                    </label>
                                </div>
                            </div>
                        </div>
                    </div>
                </details>
            </div>

            <!-- Neue Section in Settings Tab -->
            <div class="section">
                <details>
                    <summary class="section-header-summary">
                        <div class="section-title"><span>ğŸ—‚ï¸</span><span>Daten Management</span></div>
                        <span class="summary-arrow">â–¼</span>
                    </summary>
                    <div class="details-content">
                        <div class="settings-grid settings-grid-spaced">
                            <div class="setting-item">
                                <div class="setting-label">ğŸ“¤ Export Optionen</div>
                                <div class="setting-value">Sichere deine Daten in verschiedenen Formaten</div>
                                <div class="setting-actions">
                                    <button class="btn btn-primary btn-small" data-action="export-json">JSON</button>
                                    <button class="btn btn-primary btn-small" data-action="export-csv">CSV</button>
                                    <button class="btn btn-primary btn-small" data-action="export-pdf">PDF</button>
                                </div>
                            </div>
                            
                            <div class="setting-item">
                                <div class="setting-label">ğŸ“¥ Import</div>
                                <div class="setting-value">Lade bestehende Daten</div>
                                <div class="setting-actions">
                                    <input type="file" id="jsonFileInput" accept=".json" hidden>
                                    <input type="file" id="csvFileInput" accept=".csv" hidden>
                                    <button class="btn btn-primary btn-small" data-action="trigger-json-upload">JSON</button>
                                    <button class="btn btn-primary btn-small" data-action="trigger-csv-upload">CSV</button>
                                </div>
                            </div>
                        </div>
                        
                        <!-- Danger Zone -->
                        <div class="danger-zone">
                            <h3>âš ï¸ Gefahrenbereich</h3>
                            <p>Diese Aktionen kÃ¶nnen nicht rÃ¼ckgÃ¤ngig gemacht werden! Das Leeren des Caches kann bei API-Problemen helfen.</p>
                            <div class="danger-actions">
                                <button class="btn btn-warning" data-action="clear-api-cache">ğŸ”„ API Cache leeren</button>
                                <button class="btn btn-danger" data-action="reset-platforms">Plattformen zurÃ¼cksetzen</button>
                                <button class="btn btn-danger" data-action="clear-all-data">ğŸ—‘ï¸ Alle Daten lÃ¶schen</button>
                            </div>
                        </div>
                    </div>
                </details>
            </div>
        </div>

    <footer class="app-footer surface" aria-label="SeitenfuÃŸ">
        <div class="footer-status" aria-live="polite">
            <span class="footer-label">Zuletzt aktualisiert:</span>
            <span id="footerLastSync">Noch nie synchronisiert</span>
        </div>
        <div class="footer-links">
            <a href="#" aria-label="DatenschutzerklÃ¤rung">Datenschutz</a>
            <a href="#" aria-label="Support kontaktieren">Support</a>
        </div>
    </footer>

    </main>

    <div id="bottomSheet" class="bottom-sheet-overlay">
        <div class="bottom-sheet-content">
            <div class="bottom-sheet-header">
                <div class="bottom-sheet-drag-handle"></div>
            </div>
            <div id="bottomSheetBody" class="bottom-sheet-body">
                </div>
        </div>
    </div>

    <div id="notification" class="notification">
        <span id="notificationIcon">âœ…</span>
        <span id="notificationText">Gespeichert!</span>
    </div>

    <!-- Globale Suche Modal -->
    <div id="globalSearchOverlay" class="global-search-overlay" role="dialog" aria-modal="true" aria-labelledby="globalSearchHeading">
        <div id="globalSearchModal" class="global-search-modal">
            <div class="search-input-wrapper">
                <label for="globalSearchInput" id="globalSearchHeading" class="sr-only">Suche nach Plattformen, EintrÃ¤gen oder Aktionen</label>
                <input type="text" id="globalSearchInput" placeholder="Suche nach Plattformen, EintrÃ¤gen, Aktionen..." aria-describedby="searchQuickFilters">
                <button class="btn btn-small" data-action="export-search-results" title="Suchergebnisse exportieren" aria-label="Suchergebnisse exportieren">
                    <span class="app-icon" aria-hidden="true">ğŸ’¾</span>
                </button>
                <button class="search-modal-close" type="button" data-action="close-global-search" aria-label="Suche schlieÃŸen">
                    <span aria-hidden="true">âœ•</span>
                </button>
            </div>
            <div id="searchFilters" class="search-filters">
                <!-- Filter werden hier dynamisch eingefÃ¼gt -->
            </div>
            <div class="search-quick-filters" id="searchQuickFilters">
                <button class="btn btn-small" data-action="set-date-range-filter" data-range="heute">ğŸ“… Heute</button>
                <button class="btn btn-small" data-action="set-date-range-filter" data-range="woche">ğŸ“… Diese Woche</button>
                <button class="btn btn-small" data-action="set-date-range-filter" data-range="monat">ğŸ“… Dieser Monat</button>
                <button class="btn btn-small" data-action="toggle-search-filter" data-filter-type="category" data-filter-value="Exchange">ğŸ¦ Exchange</button>
                <button class="btn btn-small" data-action="toggle-search-filter" data-filter-type="category" data-filter-value="DeFi">ğŸ”„ DeFi</button>
                <button class="btn btn-small" data-action="toggle-search-filter" data-filter-type="tag" data-filter-value="high-risk">âš ï¸ High-Risk</button>
            </div>
            <div id="globalSearchResults" class="global-search-results">
                <!-- Ergebnisse werden hier dynamisch eingefÃ¼gt -->
            </div>
        </div>
    </div>

    <!-- Mobile Bottom Navigation -->
    <!-- Mobile Bottom Navigation mit mehr Funktionen -->
    <nav class="mobile-bottom-nav" role="navigation" aria-label="Mobile Navigation">
        <button class="mobile-nav-item active" data-action="switch-tab" data-tab="dashboard" aria-label="Dashboard anzeigen" aria-current="page">
            <span class="nav-icon" aria-hidden="true">ğŸ“Š</span>
        </button>
        <button class="mobile-nav-item" data-action="switch-tab" data-tab="entry" aria-label="Neuen Eintrag erstellen">
            <span class="nav-icon" aria-hidden="true">â•</span>
        </button>
        <button class="mobile-nav-item" data-action="switch-tab" data-tab="notes" aria-label="Notizen anzeigen">
            <span class="nav-icon" aria-hidden="true">ğŸ—’ï¸</span>
        </button>
        <!-- Search -->
        <button class="mobile-nav-item" data-action="open-global-search" aria-label="Suche Ã¶ffnen">
            <span class="nav-icon" aria-hidden="true">ğŸ”</span>
        </button>
        <!-- Theme Toggle -->
        <button class="mobile-nav-item" data-action="toggle-theme" aria-pressed="false" aria-label="Dunkles Design aktivieren">
            <span class="nav-icon theme-icon" aria-hidden="true">ğŸŒ™</span>
        </button>
        <!-- Menu fÃ¼r Settings, Privacy etc. -->
        <button class="mobile-nav-item" data-action="open-mobile-menu" aria-label="Mobiles MenÃ¼ Ã¶ffnen">
            <span class="nav-icon" aria-hidden="true">â‹®</span>
        </button>
    </nav>

    <div id="noteGalleryOverlay" class="note-gallery-overlay">
        <div class="note-gallery-content">
            <button type="button" class="note-gallery-close" id="noteGalleryClose" aria-label="Galerie schlieÃŸen">âœ•</button>
            <div class="note-gallery-image-wrapper" id="noteGalleryImageWrapper">
                <div class="note-gallery-loader" id="noteGalleryLoader">
                    <span>â³</span>
                </div>
                <img id="noteGalleryImage" alt="Notiz Anhang" class="note-gallery-image">
            </div>
            <div class="note-gallery-meta">
                <div id="noteGalleryCaption" class="note-gallery-caption"></div>
                <div class="note-gallery-controls">
                    <button type="button" id="noteGalleryPrev" class="note-gallery-nav" aria-label="Vorheriges Bild">â†</button>
                    <span id="noteGalleryCounter" class="note-gallery-counter"></span>
                    <button type="button" id="noteGalleryNext" class="note-gallery-nav" aria-label="NÃ¤chstes Bild">â†’</button>
                </div>
            </div>
        </div>
    </div>

    <script src="script.js" defer></script>
</body>
</html>
